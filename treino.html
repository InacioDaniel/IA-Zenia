<!DOCTYPE html>
<html lang="pt-AO">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IA Aut么noma Sci-Fi Neon</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js"></script>
<style>
body, html { margin:0; padding:0; height:100%; font-family:sans-serif; background:#020617; overflow:hidden; }
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
::-webkit-scrollbar-thumb { background: rgba(0,255,255,0.4); border-radius:4px; }

#app { display:flex; height:100vh; width:100vw; color:white; }
.sidebar { width:280px; background: rgba(0,0,0,0.3); backdrop-filter:blur(12px); border-right:1px solid rgba(255,255,255,0.1); display:flex; flex-direction:column; padding:1rem; }
.sidebar h2 { font-size:1.5rem; font-weight:bold; text-align:center; margin-bottom:1rem; color:#0ff; }
.sidebar button { margin:0.2rem 0; padding:0.5rem; border:none; border-radius:0.5rem; cursor:pointer; font-weight:bold; background:linear-gradient(45deg,#00f,#0ff,#0f0,#f0f,#f0f,#f0f0f,#ff0); background-size:200% 200%; animation:bgSlide 5s linear infinite; color:black; }
@keyframes bgSlide { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

.main { flex:1; display:flex; flex-direction:column; backdrop-filter:blur(12px); background:rgba(0,0,0,0.2); }
.header { padding:1rem; text-align:center; font-size:1.8rem; font-weight:bold; color:#0ff; text-shadow:0 0 10px #0ff,0 0 20px #0ff,0 0 30px #0ff; }
.chat-window { flex:1; overflow-y:auto; padding:1rem; display:flex; flex-direction:column; gap:0.5rem; }
.message { padding:0.5rem 1rem; border-radius:0.75rem; max-width:80%; word-wrap:break-word; }
.user { align-self:flex-end; background:rgba(0,255,255,0.2); color:#0ff; border:1px solid #0ff; }
.bot { align-self:flex-start; background:rgba(255,0,255,0.2); color:#f0f; border:1px solid #f0f; }

.input-area { display:flex; padding:1rem; gap:0.5rem; background:rgba(0,0,0,0.25); border-top:1px solid rgba(255,255,255,0.1); }
#input { flex:1; padding:0.5rem 1rem; border-radius:0.5rem; border:none; background:rgba(255,255,255,0.05); color:white; outline:none; }
.send-btn { padding:0.5rem 1rem; border:none; border-radius:0.5rem; background:linear-gradient(45deg,#00f,#0ff,#0f0,#f0f,#f0f,#f0f0f,#ff0); background-size:200% 200%; animation:bgSlide 5s linear infinite; color:black; font-weight:bold; cursor:pointer; }
img.generated { max-width:200px; border-radius:0.5rem; border:1px solid #0ff; align-self:flex-start; }

@media(max-width:768px){
  #app { flex-direction:column; }
  .sidebar { width:100%; display:flex; flex-direction:row; overflow-x:auto; }
  .sidebar button { flex:1; font-size:0.8rem; margin:0 0.2rem; }
}
</style>
</head>
<body>
<div id="app">
  <div class="sidebar">
    <h2> IA Neon</h2>
    <button onclick="selecionarModo('chat')">Chat</button>
    <button onclick="selecionarModo('code')">C贸digo</button>
    <button onclick="selecionarModo('math')">Matem谩tica</button>
    <button onclick="selecionarModo('image')">Imagem</button>
    <button onclick="abrirConfig()">Config</button>
    <button onclick="limparHistorico()">Limpar Hist贸rico</button>
  </div>
  <div class="main">
    <div class="header">IA Aut么noma Sci-Fi Neon</div>
    <div id="chat" class="chat-window"></div>
    <div class="input-area">
      <textarea id="input" rows="2" placeholder="Escreve algo..."></textarea>
      <button class="send-btn" onclick="enviarMsg()">Enviar</button>
    </div>
  </div>
</div>

<script>
let pipelineLoaded=false;
let generator=null;
let modo='chat';
async function loadModel(){
  if(!pipelineLoaded){
    generator=await window.transformers.pipeline("text-generation","Xenova/distil-gpt2");
    pipelineLoaded=true;
  }
}

function addHistorico(quem,texto){
  let chat=document.getElementById("chat");
  let div=document.createElement("div");
  div.className='message '+quem.toLowerCase();
  div.innerHTML=`<b>${quem}:</b> ${texto}`;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
  salvarLocalStorage();
}

function salvarLocalStorage(){localStorage.setItem("ia_history",document.getElementById("chat").innerHTML);}
function carregarLocalStorage(){let data=localStorage.getItem("ia_history"); if(data) document.getElementById("chat").innerHTML=data;}
function limparHistorico(){localStorage.removeItem("ia_history"); document.getElementById("chat").innerHTML="";}
carregarLocalStorage();

function selecionarModo(novo){modo=novo; addHistorico('Sistema','Modo selecionado: '+novo);}
function abrirConfig(){addHistorico('Sistema','Painel de configura莽茫o futurista aberto!');}

async function gerarImagem(prompt){
  const canvas=document.createElement("canvas");
  canvas.width=256; canvas.height=256;
  const ctx=canvas.getContext("2d");
  ctx.fillStyle="white"; ctx.fillRect(0,0,256,256);
  ctx.font="14px Arial"; ctx.fillStyle="black"; ctx.fillText("Gerando imagem...",50,128);
  setTimeout(()=>{ctx.fillStyle="cyan"; ctx.fillRect(Math.random()*200,Math.random()*200,50,50);},1500);
  return canvas.toDataURL();
}

async function enviarMsg(){
  let txt=document.getElementById("input").value.trim();
  if(!txt) return;
  addHistorico("Voc锚",txt); document.getElementById("input").value='';
  if(modo=='image'){
    addHistorico('IA',' Gerando imagem...');
    let img=await gerarImagem(txt);
    let chat=document.getElementById("chat");
    let div=document.createElement("div");
    div.innerHTML=`<img src="${img}" class="generated">`;
    chat.appendChild(div); chat.scrollTop=chat.scrollHeight;
    salvarLocalStorage();
    return;
  }
  if(modo=='math' || /[\d\+\-\*\/\^\(\)]/.test(txt)){
    try{let res=eval(txt); addHistorico('IA','Resultado: <b>'+res+'</b>'); return;}catch(e){}
  }
  await loadModel();
  let resp=await generator(txt,{max_length:100});
  addHistorico('IA',resp[0].generated_text);
}
</script>
</body>
</html>
