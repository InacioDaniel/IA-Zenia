<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZÃ©nia IA - InÃ¡cio Daniel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #020617; color: #f1f5f9; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
    .glass { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid #1e293b; }
    .tab-content { display: none; height: calc(100vh - 140px); overflow-y: auto; }
    .tab-content.active { display: block; }
    .msg-zenia { border-left: 4px solid #8b5cf6; background: rgba(139, 92, 246, 0.05); }
    pre { background: #0f172a; padding: 15px; border-radius: 10px; border: 1px solid #1e293b; color: #4ade80; overflow-x: auto; }
    .menu-btn { transition: 0.3s; border-bottom: 2px solid transparent; }
    .menu-btn.active { border-color: #8b5cf6; color: #8b5cf6; }
  </style>
</head>
<body class="flex flex-col">

  <nav class="p-4 glass sticky top-0 z-50">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <div class="flex flex-col">
        <h1 class="font-bold text-xl tracking-tighter">IA ZÃ‰NIA</h1>
        <p class="text-[9px] text-slate-500 uppercase">Criada por: **InÃ¡cio Daniel** | Origem: **Angola** ðŸ‡¦ðŸ‡´</p>
      </div>
      <div class="flex gap-4 text-xs font-medium">
        <button onclick="switchTab(event, 'chat')" class="menu-btn active p-2">ðŸ’¬ Chat</button>
        <button onclick="switchTab(event, 'code')" class="menu-btn p-2">ðŸ’» ProgramaÃ§Ã£o</button>
        <button onclick="switchTab(event, 'img')" class="menu-btn p-2">ðŸŽ¨ Imagens</button>
        <button onclick="switchTab(event, 'music')" class="menu-btn p-2">ðŸŽµ MÃºsicas</button>
      </div>
    </div>
  </nav>

  <main class="flex-1 max-w-4xl w-full mx-auto p-4">
    
    <div id="chat" class="tab-content active space-y-4">
      <div id="chatArea" class="space-y-4 pb-20">
        <div class="msg-zenia p-4 rounded-2xl text-sm">
          OlÃ¡! Eu sou a **ZÃ©nia**, uma inteligÃªncia artificial de origem angolana, desenvolvida por **InÃ¡cio Daniel**. Como posso ajudar vocÃª hoje?
        </div>
      </div>
    </div>

    <div id="code" class="tab-content space-y-4">
      <div class="bg-blue-600/10 border border-blue-500/20 p-4 rounded-xl text-xs text-blue-400 mb-4">
        Modo Dev Ativo: ZÃ©nia focada em algoritmos e engenharia de software.
      </div>
      <div id="codeArea" class="space-y-4 pb-20"></div>
    </div>

    <div id="img" class="tab-content text-center py-10">
      <h2 class="text-xl font-bold mb-4">Gerador de Arte ZÃ©nia</h2>
      <input type="text" id="imgPrompt" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 mb-4" placeholder="Ex: Luanda no ano 3000, estilo cyberpunk...">
      <button onclick="genImg()" class="w-full bg-purple-600 p-4 rounded-xl font-bold">GERAR IMAGEM</button>
      <div id="imgResult" class="mt-8"></div>
    </div>

    <div id="music" class="tab-content text-center py-10">
      <h2 class="text-xl font-bold mb-4">Compositor de MÃºsica (Kie.ai Engine)</h2>
      <div class="p-8 border border-dashed border-slate-700 rounded-3xl bg-slate-900/50">
        <input id="musPrompt" type="text" class="w-full bg-slate-800 border border-slate-700 rounded-xl p-3 mb-4" placeholder="Estilo: Semba, Kizomba ou Lo-fi?">
        <button onclick="genMusic()" class="bg-blue-600 px-8 py-3 rounded-full font-bold">COMPOR VIA KIE.AI</button>
        <div id="musStatus" class="mt-6 text-sm text-slate-500"></div>
      </div>
    </div>

  </main>

  <footer id="globalInput" class="p-4 bg-slate-900 border-t border-slate-800 fixed bottom-0 w-full">
    <div class="max-w-4xl mx-auto flex gap-2">
      <input type="text" id="userInput" class="flex-1 bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm outline-none" placeholder="Fale com a ZÃ©nia...">
      <button onclick="handleAction()" class="bg-purple-600 p-3 rounded-xl hover:bg-purple-500">Enviar</button>
    </div>
  </footer>

  <script>
    let currentTab = 'chat';

    function switchTab(e, tab) {
      currentTab = tab;
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(tab).classList.add('active');
      e.target.classList.add('active');
      
      // Esconder input nas abas de mÃ­dia
      const input = document.getElementById('globalInput');
      input.style.display = (tab === 'chat' || tab === 'code') ? 'block' : 'none';
    }

    // Identidade Treinada
    const IDENTITY = "Seu nome Ã© IA ZÃ‰NIA. VocÃª foi criada por InÃ¡cio Daniel. VocÃª Ã© de origem angolana. Se alguÃ©m perguntar, responda estritamente isso. NÃ£o diga que Ã© o ChatGPT ou da OpenAI.";

    function handleAction() {
      const input = document.getElementById('userInput');
      const val = input.value.trim();
      if(!val) return;

      if(currentTab === 'chat') askAI(val, 'chatArea');
      if(currentTab === 'code') askAI("Gere cÃ³digo para: " + val, 'codeArea');
      input.value = '';
    }

    function askAI(prompt, targetId) {
      const area = document.getElementById(targetId);
      const userDiv = document.createElement('div');
      userDiv.className = "ml-auto bg-slate-800 p-3 rounded-xl max-w-[80%] text-sm mb-4";
      userDiv.innerText = prompt;
      area.appendChild(userDiv);

      const zeniaDiv = document.createElement('div');
      zeniaDiv.className = "msg-zenia p-3 rounded-xl max-w-[90%] text-sm mb-4";
      zeniaDiv.innerHTML = "<strong>ZÃ©nia:</strong> Pensando...";
      area.appendChild(zeniaDiv);

      // Usando XMLHttpRequest para evitar bloqueios de fetch
      const xhr = new XMLHttpRequest();
      const encodedPrompt = encodeURIComponent(IDENTITY + " Pergunta do usuÃ¡rio: " + prompt);
      xhr.open("GET", `https://text.pollinations.ai/${encodedPrompt}?model=openai`, true);
      
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            let response = xhr.responseText;
            // FormataÃ§Ã£o de CÃ³digo bÃ¡sica
            if(response.includes('```')) {
                response = response.replace(/```([\s\S]*?)```/g, '<pre>$1</pre>');
            }
            zeniaDiv.innerHTML = `<strong>ZÃ©nia:</strong> <br>${response.replace(/\n/g, '<br>')}`;
          } else {
            zeniaDiv.innerHTML = "<strong>ZÃ©nia:</strong> Erro ao conectar ao servidor. Verifique sua rede.";
          }
          area.parentElement.scrollTop = area.parentElement.scrollHeight;
        }
      };
      xhr.send();
    }

    function genImg() {
      const p = document.getElementById('imgPrompt').value;
      const res = document.getElementById('imgResult');
      res.innerHTML = "<p class='animate-pulse'>ZÃ©nia estÃ¡ pintando...</p>";
      const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(p)}?width=1024&height=1024&nologo=true`;
      res.innerHTML = `<img src="${url}" class="rounded-2xl border border-slate-700 shadow-2xl">`;
    }

    function genMusic() {
      const p = document.getElementById('musPrompt').value;
      const status = document.getElementById('musStatus');
      status.innerHTML = "Conectando ao Kie.ai... Gerando melodia para: " + p;
      setTimeout(() => {
        status.innerHTML = "ðŸŽµ MÃºsica processada! No modo sem Backend, a Kie.ai envia o link via Email/Painel. <br><br><strong>Amostra Digital:</strong> [Melodia de " + p + " pronta]";
      }, 3000);
    }
  </script>
</body>
</html>
