<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Zenia IA - InteligÃªncia AutÃ´noma</title>
  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%237c3aed'>ğŸ§ </text></svg>" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>
  <style>
    :root{
      --bg:#0f172a; 
      --card:#102235; 
      --accent1:#7c3aed; 
      --accent2:#06b6d4;
      --text:#e6eef8; 
      --muted:#94a3b8;
    }

    * { box-sizing:border-box; }
    body{ font-family:'Segoe UI',system-ui,Arial; margin:0; background:var(--bg); color:var(--text); }
    .wrap{ max-width:1400px; margin:18px auto; display:grid; grid-template-columns:320px 1fr; gap:16px; padding:0 16px; }
    .card{ background:var(--card); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.06); }
    .logo{ display:flex; gap:10px; align-items:center; margin-bottom:16px; }
    .logo-icon{ width:48px; height:48px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:24px; background:linear-gradient(135deg,var(--accent1),#764ba2); }
    .small{ font-size:12px; color:var(--muted); line-height:1.5; }
    .controls{ display:flex; gap:8px; align-items:flex-end; margin-bottom:12px; flex-wrap:wrap; }
    #chatArea{ height:calc(100vh - 350px); min-height:400px; overflow-y:auto; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent); border-radius:8px; margin-bottom:12px; }
    .msg{ padding:12px; margin:8px 0; border-radius:10px; max-width:88%; word-wrap:break-word; line-height:1.6; }
    .msg.user{ background:rgba(125,179,255,0.12); color:#e6eef8; margin-left:auto; margin-right:0; }
    .msg.zenia{ background:rgba(255,255,255,0.06); margin-right:auto; margin-left:0; }
    .msg.thinking { background:rgba(6,182,212,0.15); border-left:3px solid var(--accent2); color:var(--accent2); font-style:italic; }
    .msg.error { background:rgba(239,68,68,0.15); border-left:3px solid #ef4444; color:#fca5a5; }
    .msg img, .msg video, .msg audio { max-width:100%; border-radius:8px; margin-top:8px; }
    input[type="text"], input[type="file"], textarea, select { padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.12); background:transparent; color:var(--text); font-family:inherit; font-size:13px; }
    textarea { flex:1; min-height:50px; resize:vertical; max-height:120px; }
    input[type="text"]::placeholder, textarea::placeholder { color:var(--muted); }
    button{ padding:10px 16px; border-radius:8px; border:none; background:linear-gradient(90deg,var(--accent1),var(--accent2)); color:white; cursor:pointer; font-size:13px; font-weight:600; white-space:nowrap; transition:all 0.2s; }
    button:hover { opacity:0.9; transform:scale(1.02); }
    button:disabled { opacity:0.5; cursor:not-allowed; transform:scale(1); }
    #status { font-size:12px; color:var(--muted); margin-top:8px; min-height:20px; }
    .loading { display:inline-block; animation:spin 1s linear infinite; }
    @keyframes spin { from { transform:rotate(0deg); } to { transform:rotate(360deg); } }
    .progress{ height:6px; background:#0b1320; border-radius:999px; overflow:hidden; margin-top:6px; }
    .progress > i{ display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--accent1),var(--accent2)); transition:width .3s; }
    .tabs { display:flex; gap:6px; margin-bottom:12px; border-bottom:1px solid rgba(255,255,255,0.12); padding-bottom:8px; flex-wrap:wrap; }
    .tab-btn { background:none; border:none; color:var(--muted); cursor:pointer; padding:6px 12px; font-size:12px; border-bottom:2px solid transparent; transition:all 0.2s; }
    .tab-btn:hover { color:var(--text); }
    .tab-btn.active { color:var(--accent2); border-bottom-color:var(--accent2); background:rgba(6,182,212,0.1); }
    .tab-content { display:none; }
    .tab-content.active { display:block; }
    .info-box { background:rgba(124,58,237,0.1); border:1px solid rgba(124,58,237,0.3); border-radius:8px; padding:10px; margin-top:8px; font-size:11px; color:var(--muted); line-height:1.4; }
    canvas { max-width:100%; border-radius:8px; margin-top:8px; }
    hr { margin:10px 0; border:none; border-top:1px solid rgba(255,255,255,0.12); }
    .file-input-label { cursor:pointer; color:var(--accent2); text-decoration:underline; }
    nav { background:linear-gradient(90deg, #222, #1a1a2e); color: #fff; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow:0 2px 8px rgba(0,0,0,0.3); } 
    nav .logo { font-weight: bold; font-size:14px; }
    @media(max-width:1100px){ .wrap{ grid-template-columns:1fr; } #chatArea { height:400px; } }
    @media(max-width:600px){ .tabs { gap:4px; } .tab-btn { padding:4px 8px; font-size:11px; } button { padding:8px 12px; font-size:12px; } }
  </style>
</head>
<body>
  <nav> 
    <div class="logo">ğŸ§  ZENIA IA - InteligÃªncia AutÃ´noma</div> 
  </nav>

  <div class="wrap">
    <aside class="card">
      <div class="logo">
        <div class="logo-icon">ğŸ§ </div>
        <div>
          <div style="font-weight:700;font-size:16px">ZENIA</div>
          <div class="small">IA AutÃ´noma e Criativa</div>
        </div>
      </div>

      <hr>

      <div style="margin-bottom:12px">
        <h4 style="margin:0 0 6px 0;font-size:13px;color:var(--accent1)">âš¡ CAPACIDADES</h4>
        <ul class="small" style="padding-left:16px;margin:0;list-style-position:inside">
          <li>ğŸ’¬ Conversa Natural Ilimitada</li>
          <li>â“ Perguntas Informativas</li>
          <li>ğŸ® Jogos e Desafios</li>
          <li>ğŸ’­ ReflexÃ£o e Contexto</li>
          <li>ğŸ› ï¸ Suporte TÃ©cnico</li>
          <li>ğŸ¨ GeraÃ§Ã£o de Imagens IA</li>
          <li>ğŸ¬ GeraÃ§Ã£o de VÃ­deos IA</li>
          <li>ğŸµ GeraÃ§Ã£o de MÃºsica IA</li>
          <li>ğŸ” AnÃ¡lise de Imagens</li>
          <li>ğŸŒ Busca e Pesquisa</li>
        </ul>
      </div>

      <hr>

      <div id="status" style="margin-top:8px"></div>
      <div class="progress" aria-hidden><i id="modelProgress"></i></div>

      <div style="margin-top:12px">
        <button id="micBtn" style="width:100%;margin-bottom:6px">ğŸ¤ Falar</button>
        <button id="clearBtn" style="width:100%">ğŸ—‘ï¸ Limpar Chat</button>
      </div>

      <div class="info-box">
        <strong style="color:var(--accent2)">ğŸ’¡ Dica:</strong> Zenia entende qualquer tipo de solicitaÃ§Ã£o. Digite naturalmente ou use voz.
      </div>
    </aside>

    <main class="card">
      <div class="tabs">
        <button class="tab-btn active" data-tab="chat">ğŸ’¬ Chat</button>
        <button class="tab-btn" data-tab="imagine">ğŸ¨ Gerar Imagem</button>
        <button class="tab-btn" data-tab="video">ğŸ¬ Gerar VÃ­deo</button>
        <button class="tab-btn" data-tab="music">ğŸµ Gerar MÃºsica</button>
        <button class="tab-btn" data-tab="analyze">ğŸ” Analisar Imagem</button>
      </div>

      <!-- TAB 1: CHAT -->
      <div id="chat" class="tab-content active">
        <div class="controls">
          <textarea id="userInput" placeholder="Converse livremente com Zenia. Pergunte qualquer coisa..."></textarea>
          <button id="sendBtn">Enviar</button>
        </div>
        <div id="chatArea" role="log" aria-live="polite"></div>
      </div>

      <!-- TAB 2: GERAR IMAGEM -->
      <div id="imagine" class="tab-content">
        <div class="controls">
          <textarea id="imagePrompt" placeholder="Descreva a imagem que deseja..."></textarea>
          <button id="generateImageBtn">ğŸ¨ Gerar</button>
        </div>
        <div id="imageResult" style="margin-top:12px"></div>
        <div id="imageStatus"></div>
      </div>

      <!-- TAB 3: GERAR VÃDEO -->
      <div id="video" class="tab-content">
        <div class="controls">
          <textarea id="videoPrompt" placeholder="Descreva o vÃ­deo que deseja..."></textarea>
          <button id="generateVideoBtn">ğŸ¬ Gerar</button>
        </div>
        <div id="videoResult" style="margin-top:12px"></div>
        <div id="videoStatus"></div>
      </div>

      <!-- TAB 4: GERAR MÃšSICA -->
      <div id="music" class="tab-content">
        <div class="controls">
          <textarea id="musicPrompt" placeholder="Descreva a mÃºsica que deseja..."></textarea>
          <button id="generateMusicBtn">ğŸµ Gerar MÃºsica</button>
        </div>
        <div id="musicResult" style="margin-top:12px"></div>
        <div id="musicStatus"></div>
      </div>

      <!-- TAB 5: ANALISAR IMAGEM -->
      <div id="analyze" class="tab-content">
        <div class="controls">
          <label class="file-input-label">
            ğŸ“ Selecione imagem
            <input type="file" id="imageFile" accept="image/*" style="display:none">
          </label>
          <button id="analyzeBtn">ğŸ” Analisar</button>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
          <div>
            <p style="font-size:12px;color:var(--muted);margin:0 0 6px 0">Imagem:</p>
            <img id="previewImg" alt="Preview" style="max-width:100%;display:none;border-radius:8px;border:1px solid rgba(255,255,255,0.12)"/>
          </div>
          <div>
            <p style="font-size:12px;color:var(--muted);margin:0 0 6px 0">DetecÃ§Ã£o:</p>
            <canvas id="previewCanvas" style="max-width:100%;border:1px solid rgba(255,255,255,0.12)"></canvas>
          </div>
        </div>
        <div id="analyzeResult" style="margin-top:12px"></div>
        <div id="analyzeStatus"></div>
      </div>
    </main>
  </div>

  <script>
    // ======= ABAS =======
    document.querySelectorAll(".tab-btn").forEach(btn=>{
      btn.addEventListener("click",e=>{
        document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active"));
        e.target.classList.add("active");
        document.getElementById(e.target.dataset.tab).classList.add("active");
      });
    });

    // ======= ELEMENTOS =======
    const chatArea = document.getElementById("chatArea");
    const userInput = document.getElementById("userInput");
    const sendBtn = document.getElementById("sendBtn");
    const statusEl = document.getElementById("status");
    const progressBar = document.getElementById("modelProgress");
    let isProcessing=false;

    // ======= FUNÃ‡Ã•ES =======
    function setStatus(text,progress=null){
      statusEl.textContent=text;
      if(progress!==null) progressBar.style.width=`${Math.max(0,Math.min(100,progress))}%`;
    }
    function addMessage(text,who,isHtml=false){
      const div=document.createElement("div");
      div.className="msg "+who;
      if(isHtml) div.innerHTML=text; else div.textContent=text;
      chatArea.appendChild(div);
      chatArea.scrollTop=chatArea.scrollHeight;
      return div;
    }

    // ======= CHAT COM KIE.AI =======
    async function handleChatInput(){
      const text=userInput.value.trim();
      if(!text||isProcessing) return;
      addMessage(text,"user");
      userInput.value="";
      isProcessing=true;
      sendBtn.disabled=true;
      setStatus("ğŸ§  Pensando...",20);
      try{
        const res=await fetch("https://api.kie.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json","Authorization":"Bearer demo"},body:JSON.stringify({prompt:text,model:"chat-pro",max_tokens:200})});
        const data=await res.json();
        const answer=data?.choices?.[0]?.text||"âŒ Sem resposta";
        addMessage(answer,"zenia",true);
        setStatus("âœ“ Pronto!",100);
      }catch(e){console.error(e);addMessage("âŒ Erro no chat","zenia");setStatus("âŒ Erro",0);}
      finally{isProcessing=false;sendBtn.disabled=false;}
    }

    sendBtn.addEventListener("click",handleChatInput);
    userInput.addEventListener("keypress",(e)=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();handleChatInput();}});

    // ======= GERAR IMAGEM KIE.AI =======
    document.getElementById("generateImageBtn").addEventListener("click",async()=>{
      const prompt=document.getElementById("imagePrompt").value.trim();
      if(!prompt) return;
      const resultDiv=document.getElementById("imageResult");
      const statusDiv=document.getElementById("imageStatus");
      resultDiv.innerHTML=""; statusDiv.innerHTML='<span class="loading">â³</span> Gerando...';
      try{
        setStatus("ğŸ¨ Gerando imagem...",30);
        const res=await fetch("https://api.kie.ai/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json","Authorization":"Bearer demo"},body:JSON.stringify({prompt,width:1024,height:1024,num_images:1,model:"flux-pro",steps:25,guidance_scale:7.5})});
        const data=await res.json();
        if(data?.data?.[0]?.url){
          const url=data.data[0].url;
          resultDiv.innerHTML=`<div style="text-align:center"><img src="${url}" style="max-width:100%;border-radius:8px"/><p style="font-size:12px;color:var(--muted)">Prompt: ${prompt}</p><button onclick="window.open('${url}');">ğŸ’¾ Baixar</button></div>`;
          statusDiv.textContent="âœ… Pronto!"; setStatus("âœ“ Imagem gerada!",100);
        } else throw new Error("API falhou");
      }catch(e){console.error(e);resultDiv.innerHTML='<p style="color:#fca5a5">âŒ Erro</p>';statusDiv.textContent="âŒ Falha";setStatus("Erro",0);}
    });

    // ======= GERAR VÃDEO KIE.AI =======
    document.getElementById("generateVideoBtn").addEventListener("click",async()=>{
      const prompt=document.getElementById("videoPrompt").value.trim();
      if(!prompt) return;
      const resultDiv=document.getElementById("videoResult");
      const statusDiv=document.getElementById("videoStatus");
      resultDiv.innerHTML=""; statusDiv.innerHTML='<span class="loading">â³</span> Gerando...';
      try{
        setStatus("ğŸ¬ Gerando vÃ­deo...",30);
        const res=await fetch("https://api.kie.ai/v1/video/generations",{method:"POST",headers:{"Content-Type":"application/json","Authorization":"Bearer demo"},body:JSON.stringify({prompt,model:"flux-video-pro",duration:5,fps:24})});
        const data=await res.json();
        if(data?.data?.[0]?.url){
          const url=data.data[0].url;
          resultDiv.innerHTML=`<div style="text-align:center"><video width="100%" controls><source src="${url}" type="video/mp4"></video><p style="font-size:12px;color:var(--muted)">Prompt: ${prompt}</p><button onclick="window.open('${url}');">ğŸ’¾ Baixar</button></div>`;
          statusDiv.textContent="âœ… Pronto!"; setStatus("âœ“ VÃ­deo gerado!",100);
        } else throw new Error("API falhou");
      }catch(e){console.error(e);resultDiv.innerHTML='<p style="color:#fca5a5">âŒ Erro</p>';statusDiv.textContent="âŒ Falha";setStatus("Erro",0);}
    });

    // ======= GERAR MÃšSICA KIE.AI =======
    document.getElementById("generateMusicBtn").addEventListener("click",async()=>{
      const prompt=document.getElementById("musicPrompt").value.trim();
      if(!prompt) return;
      const resultDiv=document.getElementById("musicResult");
      const statusDiv=document.getElementById("musicStatus");
      resultDiv.innerHTML=""; statusDiv.innerHTML='<span class="loading">â³</span> Gerando mÃºsica...';
      try{
        setStatus("ğŸµ Gerando mÃºsica...",30);
        const res=await fetch("https://api.kie.ai/v1/audio/generations",{method:"POST",headers:{"Content-Type":"application/json","Authorization":"Bearer demo"},body:JSON.stringify({prompt,duration:15,model:"music-pro"})});
        const data=await res.json();
        if(data?.data?.[0]?.url){
          const url=data.data[0].url;
          resultDiv.innerHTML=`<div style="text-align:center"><audio controls src="${url}"></audio><p style="font-size:12px;color:var(--muted)">Prompt: ${prompt}</p><button onclick="window.open('${url}');">ğŸ’¾ Baixar</button></div>`;
          statusDiv.textContent="âœ… Pronto!"; setStatus("âœ“ MÃºsica gerada!",100);
        } else throw new Error("API falhou");
      }catch(e){console.error(e);resultDiv.innerHTML='<p style="color:#fca5a5">âŒ Erro</p>';statusDiv.textContent="âŒ Falha";setStatus("Erro",0);}
    });

    // ======= MIC =======
    let recognition=null;
    function initSpeechRecognition(){
      const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
      if(!SR){setStatus("âŒ Mic nÃ£o suportado"); return;}
      recognition=new SR();
      recognition.lang="pt-BR";
      recognition.interimResults=false;
      recognition.onresult=(e)=>{userInput.value+=e.results[0][0].transcript+" ";userInput.focus();}
      recognition.onerror=()=>setStatus("âŒ Erro no mic");
    }
    function toggleMic(){if(!recognition)initSpeechRecognition();if(!recognition)return;try{recognition.start();setStatus("ğŸ¤ Ouvindo...",30);}catch(e){setStatus("Erro mic");}}
    initSpeechRecognition();
    document.getElementById("micBtn").addEventListener("click",toggleMic);

  </script>
</body>
</html>
