<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Zenia IA - Inteligﾃｪncia Autﾃｴnoma</title>
  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%237c3aed'>ｧ</text></svg>" type="image/x-icon">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>
  
  <style>
    :root {
      --bg: #0f172a; --card: #1e293b; --accent: #7c3aed;
    }
    body { background-color: var(--bg); color: #e2e8f0; }
    .custom-scroll::-webkit-scrollbar { width: 6px; }
    .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .msg-zenia { background: rgba(255,255,255,0.05); border-left: 3px solid var(--accent); }
    .msg-user { background: rgba(124,58,237,0.1); border-right: 3px solid #06b6d4; }
  </style>
</head>
<body class="min-h-screen">

  <nav class="bg-slate-900 border-b border-slate-700 p-4 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="flex items-center gap-2 font-bold text-lg">
        <span class="text-2xl">ｧ</span> ZENIA IA <span class="text-xs bg-purple-600 px-2 py-0.5 rounded text-white ml-2">KIE.AI POWERED</span>
      </div>
      <div class="text-xs text-slate-400 hidden md:block">Processando via Nuvem Hﾃｭbrida</div>
    </div>
  </nav>

  <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-6 p-4">
    
    <aside class="lg:col-span-1 space-y-4">
      <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
        <h3 class="text-purple-400 font-bold mb-3 flex items-center gap-2">笞｡ CAPACIDADES</h3>
        <ul class="text-sm space-y-2 text-slate-300">
          <li>町 Chat Cognitivo (Kie.ai)</li>
          <li>耳 Imagens Pro (Flux/Kie)</li>
          <li>汐 Vﾃｭdeos Realistas (Kie.ai)</li>
          <li>七 Geraﾃｧﾃ｣o de Mﾃｺsica (Kie.ai)</li>
          <li>剥 Visﾃ｣o Computacional</li>
        </ul>
        <hr class="my-4 border-slate-700">
        <div id="status" class="text-xs text-slate-500 mb-2">Sistema Pronto</div>
        <div class="w-full bg-slate-900 rounded-full h-1.5 overflow-hidden">
          <div id="progressBar" class="bg-purple-600 h-full w-0 transition-all duration-300"></div>
        </div>
        <button id="micBtn" class="w-full mt-4 bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-sm transition">痔 Comand de Voz</button>
      </div>
      
      <div class="p-4 bg-purple-900/20 border border-purple-500/30 rounded-xl">
        <p class="text-xs text-purple-300 italic">"Zenia agora utiliza os modelos avanﾃｧados da Kie.ai para todas as tarefas criativas."</p>
      </div>
    </aside>

    <main class="lg:col-span-3 bg-slate-800 rounded-xl border border-slate-700 flex flex-col overflow-hidden">
      
      <div class="flex overflow-x-auto border-b border-slate-700 bg-slate-900/50 p-2 gap-2">
        <button class="tab-btn active px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap bg-purple-600" data-tab="chat">町 Chat</button>
        <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap hover:bg-slate-700" data-tab="imagine">耳 Imagem</button>
        <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap hover:bg-slate-700" data-tab="video">汐 Vﾃｭdeo</button>
        <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap hover:bg-slate-700" data-tab="music">七 Mﾃｺsica</button>
        <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap hover:bg-slate-700" data-tab="vision">剥 Visﾃ｣o</button>
      </div>

      <div class="p-4 flex-1">
        
        <div id="chat" class="tab-content active flex flex-col h-[600px]">
          <div id="chatArea" class="flex-1 overflow-y-auto custom-scroll space-y-4 p-2">
            <div class="msg-zenia p-3 rounded-lg text-sm max-w-[85%]">Olﾃ｡! Sou Zenia, conectada ﾃ API Kie.ai. Como posso te inspirar hoje?</div>
          </div>
          <div class="mt-4 flex gap-2">
            <textarea id="userInput" class="flex-1 bg-slate-900 border border-slate-700 rounded-lg p-3 text-sm focus:ring-2 focus:ring-purple-500 outline-none resize-none" placeholder="Pergunte qualquer coisa..."></textarea>
            <button id="sendBtn" class="bg-purple-600 hover:bg-purple-500 px-6 rounded-lg font-bold transition">Enviar</button>
          </div>
        </div>

        <div id="imagine" class="tab-content text-center py-10">
          <h2 class="text-xl font-bold mb-4">Gerador de Imagens Artﾃｭsticas</h2>
          <textarea id="imgPrompt" class="w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-xl p-4 mb-4" placeholder="Ex: Um astronauta andando em um campo de flores de neon, estilo cyberpunk..."></textarea>
          <br>
          <button id="genImgBtn" class="bg-gradient-to-r from-purple-600 to-blue-500 px-8 py-3 rounded-full font-bold hover:scale-105 transition">Gerar Obra de Arte</button>
          <div id="imgResult" class="mt-8 grid place-items-center"></div>
        </div>

        <div id="video" class="tab-content text-center py-10">
          <h2 class="text-xl font-bold mb-4">Gerador de Vﾃｭdeo IA</h2>
          <textarea id="vidPrompt" class="w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-xl p-4 mb-4" placeholder="Descreva o movimento, ex: Cachoeira de lava fluindo em Marte, 4k cinematic..."></textarea>
          <br>
          <button id="genVidBtn" class="bg-gradient-to-r from-pink-600 to-purple-600 px-8 py-3 rounded-full font-bold hover:scale-105 transition">Gerar Vﾃｭdeo</button>
          <div id="vidResult" class="mt-8 grid place-items-center"></div>
        </div>

        <div id="music" class="tab-content text-center py-10">
          <h2 class="text-xl font-bold mb-4">Compositor de Mﾃｺsica IA</h2>
          <textarea id="musPrompt" class="w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-xl p-4 mb-4" placeholder="Ex: Lo-fi hip hop calmo com batidas de jazz e som de chuva..."></textarea>
          <br>
          <button id="genMusBtn" class="bg-gradient-to-r from-green-600 to-teal-500 px-8 py-3 rounded-full font-bold hover:scale-105 transition">Compor Mﾃｺsica</button>
          <div id="musResult" class="mt-8 grid place-items-center"></div>
        </div>

        <div id="vision" class="tab-content">
           <div class="flex flex-col md:flex-row gap-4 h-full">
              <div class="flex-1 bg-slate-900 p-4 rounded-xl border border-dashed border-slate-600 flex flex-col items-center justify-center">
                <input type="file" id="fileInput" class="hidden" accept="image/*">
                <label for="fileInput" class="cursor-pointer text-purple-400 hover:text-purple-300">Clique para carregar imagem</label>
                <img id="preview" class="mt-4 max-h-64 rounded hidden">
              </div>
              <div class="flex-1 bg-slate-900 p-4 rounded-xl border border-slate-700">
                <h4 class="text-sm font-bold mb-2">Objetos Detectados:</h4>
                <canvas id="visionCanvas" class="w-full h-auto rounded"></canvas>
                <div id="visionLabels" class="mt-2 text-xs text-slate-400"></div>
              </div>
           </div>
        </div>

      </div>
    </main>
  </div>

  <script>
    // --- CONFIGURAﾃﾃグ KIE.AI ---
    // Substitua 'SUA_CHAVE_AQUI' pela sua chave real da Kie.ai
    const KIE_API_KEY = 'demo'; 
    const KIE_BASE_URL = 'https://api.kie.ai/v1';

    // --- SELETORES ---
    const chatArea = document.getElementById('chatArea');
    const statusText = document.getElementById('status');
    const progressBar = document.getElementById('progressBar');

    // --- NAVEGAﾃﾃグ ---
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('active', 'bg-purple-600');
          b.classList.add('hover:bg-slate-700');
        });
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        btn.classList.add('active', 'bg-purple-600');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    // --- FUNﾃﾃ髭S DE INTERFACE ---
    function updateStatus(text, progress) {
      statusText.innerText = text;
      progressBar.style.width = progress + '%';
    }

    function addMsg(content, role) {
      const div = document.createElement('div');
      div.className = `p-3 rounded-lg text-sm max-w-[85%] ${role === 'user' ? 'msg-user ml-auto' : 'msg-zenia'}`;
      div.innerHTML = content;
      chatArea.appendChild(div);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    // --- INTEGRAﾃﾃグ KIE.AI: CHAT ---
    document.getElementById('sendBtn').onclick = async () => {
      const input = document.getElementById('userInput');
      const text = input.value.trim();
      if(!text) return;

      addMsg(text, 'user');
      input.value = '';
      updateStatus('Zenia pensando...', 40);

      try {
        const response = await fetch(`${KIE_BASE_URL}/chat/completions`, {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${KIE_API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-4-o", // Ou modelo disponﾃｭvel na Kie.ai
            messages: [{role: "user", content: text}]
          })
        });
        const data = await response.json();
        const reply = data.choices[0].message.content;
        addMsg(reply, 'zenia');
        updateStatus('Pronto', 100);
      } catch (err) {
        addMsg('Erro ao conectar com Kie.ai. Verifique a chave de API.', 'zenia');
        updateStatus('Erro na conexﾃ｣o', 0);
      }
    };

    // --- INTEGRAﾃﾃグ KIE.AI: IMAGEM ---
    document.getElementById('genImgBtn').onclick = async () => {
      const prompt = document.getElementById('imgPrompt').value;
      const resultDiv = document.getElementById('imgResult');
      resultDiv.innerHTML = '<div class="animate-spin text-4xl">竢ｳ</div>';
      updateStatus('Gerando imagem...', 50);

      try {
        const res = await fetch(`${KIE_BASE_URL}/images/generations`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${KIE_API_KEY}` },
          body: JSON.stringify({ prompt, model: "flux-pro" })
        });
        const data = await res.json();
        resultDiv.innerHTML = `<img src="${data.data[0].url}" class="rounded-xl shadow-2xl border-4 border-slate-700 max-w-full h-auto">`;
        updateStatus('Imagem Criada!', 100);
      } catch (e) { resultDiv.innerText = 'Falha ao gerar imagem.'; }
    };

    // --- INTEGRAﾃﾃグ KIE.AI: Vﾃ好EO ---
    document.getElementById('genVidBtn').onclick = async () => {
      const prompt = document.getElementById('vidPrompt').value;
      const resultDiv = document.getElementById('vidResult');
      resultDiv.innerHTML = '<p class="animate-pulse">Iniciando renderizaﾃｧﾃ｣o de vﾃｭdeo (Kie.ai)...</p>';
      
      try {
        const res = await fetch(`${KIE_BASE_URL}/video/generations`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${KIE_API_KEY}` },
          body: JSON.stringify({ prompt, model: "kling-v1" })
        });
        const data = await res.json();
        resultDiv.innerHTML = `<video src="${data.data[0].url}" controls class="rounded-xl w-full max-w-md"></video>`;
        updateStatus('Vﾃｭdeo Pronto!', 100);
      } catch (e) { resultDiv.innerText = 'Serviﾃｧo de vﾃｭdeo indisponﾃｭvel.'; }
    };

    // --- INTEGRAﾃﾃグ KIE.AI: Mﾃ售ICA ---
    document.getElementById('genMusBtn').onclick = async () => {
      const prompt = document.getElementById('musPrompt').value;
      const resultDiv = document.getElementById('musResult');
      resultDiv.innerHTML = '<p class="animate-bounce">Compondo melodia...</p>';

      try {
        const res = await fetch(`${KIE_BASE_URL}/audio/generations`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${KIE_API_KEY}` },
          body: JSON.stringify({ prompt, model: "suno-v3" })
        });
        const data = await res.json();
        resultDiv.innerHTML = `
          <div class="bg-slate-900 p-6 rounded-2xl border border-slate-700 w-full max-w-md">
            <div class="mb-4 text-2xl">七</div>
            <audio src="${data.data[0].url}" controls class="w-full"></audio>
            <p class="text-xs mt-2 text-slate-400">Gerado por Kie.ai Music Engine</p>
          </div>`;
        updateStatus('Mﾃｺsica Composta!', 100);
      } catch (e) { resultDiv.innerText = 'Erro ao compor mﾃｺsica.'; }
    };

    // --- VISﾃグ COMPUTACIONAL (Tensorflow Local) ---
    let net;
    async function loadModel() {
      updateStatus('Carregando Visﾃ｣o...', 30);
      net = await cocoSsd.load();
      updateStatus('Visﾃ｣o Pronta', 100);
    }
    loadModel();

    document.getElementById('fileInput').onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = (f) => {
        const img = document.getElementById('preview');
        img.src = f.target.result;
        img.classList.remove('hidden');
        img.onload = () => detectObjects(img);
      };
      reader.readAsDataURL(file);
    };

    async function detectObjects(img) {
      const canvas = document.getElementById('visionCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0);

      const predictions = await net.detect(img);
      ctx.strokeStyle = '#7c3aed';
      ctx.lineWidth = 4;
      ctx.font = '18px Arial';
      ctx.fillStyle = '#7c3aed';

      predictions.forEach(p => {
        ctx.strokeRect(...p.bbox);
        ctx.fillText(`${p.class} (${Math.round(p.score*100)}%)`, p.bbox[0], p.bbox[1] > 20 ? p.bbox[1]-10 : 20);
      });
    }
  </script>
</body>
</html>
