<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>ia-z√©nia</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex h-screen bg-gray-100">

  <!-- Barra lateral -->
  <aside class="w-64 bg-gray-900 text-white flex flex-col p-4">
    <h1 class="text-xl font-bold mb-6">ia-z√©nia</h1>
    <nav class="flex-1">
      <ul>
        <li class="mb-2"><a href="https://antonia-ia.netlify.app" target="_blank" class="hover:text-yellow-400">Aplicativo Antonia</a></li>
        <li class="mb-2"><a href="https://zenia-projects.netlify.app" target="_blank" class="hover:text-yellow-400">Z√©nia Projects</a></li>
        <li class="mb-2"><button onclick="buscarChats()" class="hover:text-yellow-400">Buscar em Chats</button></li>
        <li class="mb-2"><button onclick="abrirGaleria()" class="hover:text-yellow-400">Galeria</button></li>
        <li class="mb-2"><button onclick="mostrarHistorico()" class="hover:text-yellow-400">Hist√≥rico Local</button></li>
      </ul>
    </nav>
    <div class="mt-auto">
      <p class="text-sm">Usu√°rio: <span id="usuario">In√°cio</span></p>
    </div>
  </aside>

  <!-- √Årea principal -->
  <main class="flex-1 flex flex-col">
    <!-- Chat -->
    <div id="chat" class="flex-1 p-4 overflow-y-auto bg-white">
      <!-- Mensagens aparecer√£o aqui -->
    </div>

    <!-- Input -->
    <div class="p-4 bg-gray-200 flex items-center space-x-2">
      <button id="btnAnexo" class="bg-gray-700 text-white px-2 py-1 rounded">+</button>
      <input id="msgInput" type="text" placeholder="Escreva aqui..." class="flex-1 px-2 py-1 rounded border">
      <button id="btnMic" class="bg-blue-600 text-white px-2 py-1 rounded">üé§</button>
      <select id="vozSelect" class="px-2 py-1 rounded border">
        <option value="voz1">Voz 1</option>
        <option value="voz2">Voz 2</option>
      </select>
      <button id="btnModoVoz" class="bg-green-600 text-white px-2 py-1 rounded">Modo Voz Assist</button>
    </div>

    <!-- Aviso -->
    <div class="p-2 text-center text-xs bg-yellow-100 text-gray-700">
      ‚ö†Ô∏è A Z√©nia pode cometer erros...
    </div>
  </main>

  <script>
    const apiKey = "sk_IpRFiSHdzLbqhEDUBHE0zgp6mQR1jJnK";

    async function enviarMensagem(texto) {
      const chat = document.getElementById("chat");
      const msgDiv = document.createElement("div");
      msgDiv.className = "mb-2";
      msgDiv.innerHTML = "<b>Voc√™:</b> " + texto;
      chat.appendChild(msgDiv);

      // Chamada √† API Pollinations
      const resposta = await fetch("https://api.pollinations.ai/prompt", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`
        },
        body: JSON.stringify({ prompt: texto, model: "zenia-full" })
      });
      const data = await resposta.json();

      const respDiv = document.createElement("div");
      respDiv.className = "mb-2 text-blue-700";
      respDiv.innerHTML = "<b>Z√©nia:</b> " + (data.output || "Sem resposta");
      chat.appendChild(respDiv);
    }

    document.getElementById("msgInput").addEventListener("keypress", e => {
      if (e.key === "Enter") {
        enviarMensagem(e.target.value);
        e.target.value = "";
      }
    });

    // Fun√ß√µes extras (placeholders)
    function buscarChats(){ alert("Buscar em chats..."); }
    function abrirGaleria(){ alert("Abrir galeria..."); }
    function mostrarHistorico(){ alert("Mostrar hist√≥rico local..."); }

    // Carregar cm.json
    fetch("cm.json")
      .then(r => r.json())
      .then(data => console.log("Conhecimentos carregados:", data));
  </script>
</body>
</html>
